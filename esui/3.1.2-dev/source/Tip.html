<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>The source code</title>
  <link href="../resources/prettify/prettify.css" type="text/css" rel="stylesheet" />
  <script type="text/javascript" src="../resources/prettify/prettify.js"></script>
  <style type="text/css">
    .highlight { display: block; background-color: #ddd; }
  </style>
  <script type="text/javascript">
    function highlight() {
      document.getElementById(location.hash.replace(/#/, "")).className = "highlight";
    }
  </script>
</head>
<body onload="prettyPrint(); highlight();">
  <pre class="prettyprint lang-js"><span id='global-property-'>/**
</span> * ESUI (Enterprise Simple UI)
 * Copyright 2013 Baidu Inc. All rights reserved.
 *
 * @ignore
 * @file 提示信息控件
 * @author lisijin, dbear, otakustay
 */
define(
    function (require) {
        var u = require(&#39;underscore&#39;);
        var Control = require(&#39;./Control&#39;);
        var ui = require(&#39;./main&#39;);

        require(&#39;./TipLayer&#39;);

<span id='Tip-method-constructor'><span id='Tip'>        /**
</span></span>         * 提示信息控件
         *
         * `Tip`控件是一个小图标，当鼠标移到图标上时，会出现一个层显示提示信息
         *
         * @extends Control
         * @requires TipLayer
         * @constructor
         */
        function Tip(options) {
            Control.apply(this, arguments);
        }

<span id='Tip-property-type'>        /**
</span>         * 控件类型，始终为`&quot;Tip&quot;`
         *
         * @type {string}
         * @readonly
         * @override
         */
        Tip.prototype.type = &#39;Tip&#39;;

<span id='Tip-method-initOptions'>        /**
</span>         * 初始化参数
         *
         * @param {Object} [options] 构造函数传入的参数
         * @protected
         * @override
         */
        Tip.prototype.initOptions = function (options) {
            // 默认选项配置
            var properties = {
                title: &#39;&#39;,
                content: &#39;&#39;,
<span id='Tip-property-arrow'>                /**
</span>                 * @property {boolean} arrow
                 *
                 * 是否需要箭头
                 *
                 * 为了方便从DOM生成，此属性在初始化时如果为字符串`&quot;false&quot;`，
                 * 将被认为是布尔值`false`处理
                 *
                 * 具体参考{@link TipLayer#arrow}属性
                 */
                arrow: true,

<span id='Tip-property-showMode'>                /**
</span>                 * @property {string} showMode
                 *
                 * 指定信息浮层的显示方案，
                 * 具体参考{@link TipLayer#attachTo}方法的`showMode`参数的说明
                 */
                showMode: &#39;over&#39;,

<span id='Tip-property-delayTime'>                /**
</span>                 * @property {number} delayTime
                 *
                 * 指定信息浮层的显示的延迟时间，以毫秒为单位，
                 * 具体参考{@link TipLayer#attachTo}方法的`delayTime`参数的说明
                 */
                delayTime: 500
            };
            if (options.arrow === &#39;false&#39;) {
                options.arrow = false;
            }

            extractDOMProperties(this.main, properties);

            u.extend(properties, options);

            this.setProperties(properties);
        };

<span id='global-method-extractDOMProperties'>        /**
</span>         * 从DOM中抽取`title`和`content`属性，如果有的话优先级低于外部给定的
         *
         * @param {HTMLElement} 主元素
         * @param  {Object} options 构造函数传入的参数
         * @ignore
         */
        function extractDOMProperties(main, options) {
            options.title = options.title || main.getAttribute(&#39;title&#39;);
            main.removeAttribute(&#39;title&#39;);
            options.content = options.content || main.innerHTML;
            main.innerHTML = &#39;&#39;;
        }
<span id='Tip-method-createMain'>        /**
</span>         * 创建主元素，默认使用`&lt;aside&gt;`元素
         *
         * @return {HTMLElement} 主元素
         * @protected
         * @override
         */
        Tip.prototype.createMain = function (options) {
            return document.createElement(&#39;aside&#39;);
        };

<span id='Tip-method-initStructure'>        /**
</span>         * 初始化DOM结构
         *
         * @protected
         * @override
         */
        Tip.prototype.initStructure = function () {
            var main = document.createElement(&#39;div&#39;);
            document.body.appendChild(main);
            var tipLayer = ui.create(
                &#39;TipLayer&#39;,
                {
                    main: main,
                    childName: &#39;layer&#39;,
                    content: this.content,
                    title: this.title,
                    arrow: this.arrow,
<span id='Tip-property-layerWidth'>                    /**
</span>                     * @property {number} [layerWidth=200]
                     *
                     * 指定信息浮层的宽度，具体参考{@link TipLayer#width}属性
                     */
                    width: this.layerWidth || 200,
                    viewContext: this.viewContext
                }
            );
            this.addChild(tipLayer);
            tipLayer.render();

            var attachOptions = {
                showMode: this.mode,
                delayTime: this.delayTime,
                targetControl: this,
                positionOpt: {top: &#39;top&#39;, right: &#39;left&#39;}
            };
            tipLayer.attachTo(attachOptions);
        };

<span id='Tip-method-repaint'>        /**
</span>         * 重渲染
         *
         * @method
         * @protected
         * @override
         */
        Tip.prototype.repaint = require(&#39;./painters&#39;).createRepaint(
            Control.prototype.repaint,
            {
                name: &#39;title&#39;,
                paint: function (tip, value) {
                    var layer = tip.getChild(&#39;layer&#39;);
                    if (layer) {
                        layer.setTitle(value);
                    }
                }
            },
            {
                name: &#39;content&#39;,
                paint: function (tip, value) {
                    var layer = tip.getChild(&#39;layer&#39;);
                    if (layer) {
                        layer.setContent(value);
                    }
                }
            }
        );

        require(&#39;./lib&#39;).inherits(Tip, Control);
        ui.register(Tip);
        return Tip;
    }
);
</pre>
</body>
</html>
